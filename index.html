<!DOCTYPE html>
<html>

<head>
  <title>Swagger UI</title>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/swagger-ui-dist/swagger-ui.css" />
</head>

<body>
  <div id="swagger-ui"></div>
  <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@5.11.0/swagger-ui-standalone-preset.js"></script>

  <script>
    window.onload = () => {
      const ts = Date.now();

      SwaggerUIBundle({
        urls: [
          { url: "readme.yaml?v=" + ts, name: "首頁" },
          { url: "ndltd/reader.yaml?v=" + ts, name: "博碩士論文系統 讀者端" },
          { url: "ndltd/admin.yaml?v=" + ts, name: "博碩士論文系統 國圖端" },
          { url: "ndltd/api.yaml?v=" + ts, name: "博碩士論文系統 對外API介接服務" },
          { url: "ndltdsch/portal.yaml?v=" + ts, name: "大學論文系統 入口頁" },
          { url: "ndltdsch/admin.yaml?v=" + ts, name: "大學論文系統 學校端" },
          { url: "ndltdsch/student.yaml?v=" + ts, name: "大學論文系統 學生端" },
          { url: "ndltdsch/reader.yaml?v=" + ts, name: "大學論文系統 檢索端" },
        ],
        dom_id: "#swagger-ui",
        presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
        layout: "StandaloneLayout",
      });

      const observer = new MutationObserver(() => {
        const logo = document.querySelector('.topbar-wrapper a.link');
        if (logo) {
          logo.innerText = "博碩士論文系統 API";
          logo.href = "./";
          observer.disconnect();
        }
        const labelSpan = document.querySelector('.select-label span');
        if (labelSpan && labelSpan.innerText === "Select a definition") {
          labelSpan.innerText = "選擇系統";
        }

        if (logo && labelSpan) {
          observer.disconnect(); // 都改完就停止監聽
        }
      });
      observer.observe(document.querySelector('#swagger-ui'), { childList: true, subtree: true });

    };
  </script>
</body>

</html