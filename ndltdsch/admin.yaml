openapi: 3.0.3
info:
  title: 大學論文系統 學校端
  description: 學校管理功能，整合個人資料、人員管理、論文審核、系統設定、統計報表、送存國圖等完整功能
  version: 1.0.0
  contact:
    name: Github 原始碼
    url: https://github.com/chouhsiang/thesis-swagger

servers:
  - url: https://ndltdsch.ncl.edu.tw/api/v1/{school}/admin
    description: 正式環境

security:
  - bearerAuth: []

paths:
  # 待辦事項 API
  /todo:
    get:
      tags: [待辦事項]
      summary: 取得待辦事項清單
      description: 取得管理者的待辦事項清單
      responses:
        '200':
          description: 成功取得待辦事項清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoListResponse'

  # 系統設定 API
  /systemsettings:
    get:
      tags: [系統設定]
      summary: 取得系統設定清單
      description: 取得所有系統設定的 key-value 對
      parameters:
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
        - name: key
          in: query
          description: 依 key 名稱篩選
          schema:
            type: string
            example: "site_name"
      responses:
        '200':
          description: 成功取得系統設定清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemSettingListResponse'
    
    post:
      tags: [系統設定]
      summary: 新增系統設定
      description: 新增一個系統設定 key-value 對
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SystemSettingCreate'
      responses:
        '201':
          description: 成功新增系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemSettingResponse'

  /systemsettings/{key}:
    get:
      tags: [系統設定]
      summary: 取得單一系統設定
      description: 依 key 取得特定的系統設定值
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
            example: "site_name"
          description: 系統設定的 key
      responses:
        '200':
          description: 成功取得系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemSettingResponse'
        '404':
          description: 找不到指定的系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    put:
      tags: [系統設定]
      summary: 更新系統設定
      description: 更新指定 key 的系統設定值
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
            example: "site_name"
          description: 系統設定的 key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SystemSettingUpdate'
      responses:
        '200':
          description: 成功更新系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemSettingResponse'
        '404':
          description: 找不到指定的系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    delete:
      tags: [系統設定]
      summary: 刪除系統設定
      description: 刪除指定 key 的系統設定
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
            example: "site_name"
          description: 系統設定的 key
      responses:
        '200':
          description: 成功刪除系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: 找不到指定的系統設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # 主題策展管理 API
  /exhibitions:
    get:
      tags: [主題策展管理]
      summary: 取得主題策展清單
      description: 取得所有主題策展的管理清單
      parameters:
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
        - name: category
          in: query
          description: 策展分類篩選
          schema:
            type: string
            enum: [熱門主題, 學科領域, 時事議題, 特色研究]
        - name: featured
          in: query
          description: 是否只顯示精選策展
          schema:
            type: boolean
        - name: status
          in: query
          description: 策展狀態篩選
          schema:
            type: string
            enum: [草稿, 已發布, 已下架]
      responses:
        '200':
          description: 成功取得主題策展清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExhibitionListResponse'
    
    post:
      tags: [主題策展管理]
      summary: 新增主題策展
      description: 建立一個新的主題策展
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExhibitionCreate'
      responses:
        '201':
          description: 成功新增主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExhibitionResponse'

  /exhibitions/{id}:
    get:
      tags: [主題策展管理]
      summary: 取得單一主題策展
      description: 取得指定 ID 的主題策展詳細資訊
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
      responses:
        '200':
          description: 成功取得主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExhibitionResponse'
        '404':
          description: 找不到指定的主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    put:
      tags: [主題策展管理]
      summary: 更新主題策展
      description: 更新指定 ID 的主題策展資訊
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExhibitionUpdate'
      responses:
        '200':
          description: 成功更新主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExhibitionResponse'
        '404':
          description: 找不到指定的主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    delete:
      tags: [主題策展管理]
      summary: 刪除主題策展
      description: 刪除指定 ID 的主題策展
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
      responses:
        '200':
          description: 成功刪除主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: 找不到指定的主題策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /exhibitions/{id}/theses:
    get:
      tags: [主題策展管理]
      summary: 取得策展包含的論文清單
      description: 取得指定策展包含的所有論文
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功取得論文清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExhibitionThesesResponse'
    
    post:
      tags: [主題策展管理]
      summary: 新增論文到策展
      description: 將論文加入到指定的主題策展中
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [thesis_ids]
              properties:
                thesis_ids:
                  type: array
                  items:
                    type: string
                  description: 要加入的論文 ID 列表
                  example: ["thesis123", "thesis456"]
      responses:
        '200':
          description: 成功新增論文到策展
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /exhibitions/{id}/theses/{thesis_id}:
    delete:
      tags: [主題策展管理]
      summary: 從策展中移除論文
      description: 將指定論文從主題策展中移除
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "EXH-AI-EDU-2024"
          description: 主題策展唯一識別碼
        - name: thesis_id
          in: path
          required: true
          schema:
            type: string
            example: "thesis123"
          description: 論文唯一識別碼
      responses:
        '200':
          description: 成功從策展中移除論文
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: 找不到指定的策展或論文
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # 退件範本管理 API
  /rejecttemplates:
    get:
      tags: [退件範本管理]
      summary: 取得退件範本清單
      description: 取得所有退件範本的清單
      parameters:
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
        - name: keyword
          in: query
          description: 關鍵字搜尋
          schema:
            type: string
            example: "格式"
      responses:
        '200':
          description: 成功取得退件範本清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectTemplateListResponse'
    
    post:
      tags: [退件範本管理]
      summary: 新增退件範本
      description: 建立一個新的退件範本
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectTemplateCreate'
      responses:
        '201':
          description: 成功新增退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectTemplateResponse'

  /rejecttemplates/{id}:
    get:
      tags: [退件範本管理]
      summary: 取得單一退件範本
      description: 取得指定 ID 的退件範本內容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "template001"
          description: 退件範本唯一識別碼
      responses:
        '200':
          description: 成功取得退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectTemplateResponse'
        '404':
          description: 找不到指定的退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    put:
      tags: [退件範本管理]
      summary: 更新退件範本
      description: 更新指定 ID 的退件範本內容
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "template001"
          description: 退件範本唯一識別碼
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectTemplateUpdate'
      responses:
        '200':
          description: 成功更新退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectTemplateResponse'
        '404':
          description: 找不到指定的退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    delete:
      tags: [退件範本管理]
      summary: 刪除退件範本
      description: 刪除指定 ID 的退件範本
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "template001"
          description: 退件範本唯一識別碼
      responses:
        '200':
          description: 成功刪除退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: 找不到指定的退件範本
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # 科系管理 API
  /departments:
    get:
      tags: [科系管理]
      summary: 取得科系清單
      description: 取得所有科系的清單，包含學院和科系資訊
      parameters:
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
        - name: college
          in: query
          description: 依學院名稱篩選
          schema:
            type: string
            example: "工學院"
        - name: keyword
          in: query
          description: 關鍵字搜尋（科系名稱）
          schema:
            type: string
            example: "資訊"
      responses:
        '200':
          description: 成功取得科系清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DepartmentListResponse'

  /departments/{id}:
    get:
      tags: [科系管理]
      summary: 取得單一科系資訊
      description: 取得指定 ID 的科系詳細資訊
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "dept001"
          description: 科系唯一識別碼
      responses:
        '200':
          description: 成功取得科系資訊
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DepartmentResponse'
        '404':
          description: 找不到指定的科系
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # 人員管理 API (來自 users.yaml)
  /users:
    get:
      tags: [人員管理]
      summary: 取得使用者清單
      description: 查詢所有使用者及其角色、權限設定
      parameters:
        - name: role
          in: query
          description: 角色篩選
          schema:
            type: string
            enum: [管理員, 審查人員, 工讀生, 系所人員, 其他]
        - name: department
          in: query
          description: 系所篩選
          schema:
            type: string
            example: "資訊工程學系"
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功取得使用者清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
    
    post:
      tags: [人員管理]
      summary: 新增人員
      description: 新增一位新使用者並設定角色與權限
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
      responses:
        '201':
          description: 成功新增人員
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'

  /users/{userId}:
    get:
      tags: [人員管理]
      summary: 取得使用者資訊
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            example: "user001"
      responses:
        '200':
          description: 成功取得使用者資訊
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
    
    put:
      tags: [人員管理]
      summary: 編輯使用者權限
      description: 更新使用者角色與權限
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            example: "user001"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: 成功更新使用者資訊
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
    
    delete:
      tags: [人員管理]
      summary: 刪除使用者
      description: 移除使用者帳號
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            example: "user001"
      responses:
        '200':
          description: 成功刪除使用者
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

 

  # 系統設定 API (來自 settings.yaml)
  /thesissettings:
    get:
      tags: [論文設定]
      summary: 取得學校論文設定
      description: 取得學校的論文上傳與授權設定
      responses:
        '200':
          description: 成功取得設定
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ThesisSettingResponse'
    
    post:
      tags: [論文設定]
      summary: 建立或更新學校論文設定
      description: 若該學校已存在設定，會覆蓋舊設定
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ThesisSetting'
      responses:
        '201':
          description: 設定成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # 論文管理 API (來自 thesis.yaml)
  /theses:
    get:
      tags: [論文管理]
      summary: 查詢論文清單
      description: 查詢全校論文清單，支援多種篩選條件
      parameters:
        - name: department
          in: query
          description: 系所篩選
          schema:
            type: string
            example: "資訊工程學系"
        - name: startDate
          in: query
          description: 開始日期
          schema:
            type: string
            format: date
            example: "2024-01-01"
        - name: endDate
          in: query
          description: 結束日期
          schema:
            type: string
            format: date
            example: "2024-12-31"
        - name: status
          in: query
          description: 論文狀態
          schema:
            type: string
            enum: [公開, 限制, 隱藏]
            example: "公開"
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功取得論文清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ThesisListResponse'

  /theses/{thesisId}/replace:
    post:
      tags: [論文管理]
      summary: 抽換論文
      description: 對單篇論文進行抽換，需確認相關條件
      parameters:
        - name: thesisId
          in: path
          required: true
          schema:
            type: string
            example: "thesis123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [confirm]
              properties:
                confirm:
                  type: boolean
                  description: 確認抽換
                  example: true
                reason:
                  type: string
                  description: 抽換原因
                  example: "作者要求更正內容"
      responses:
        '200':
          description: 抽換成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # 論文審核 API (來自 reviews.yaml)
  /reviews:
    get:
      tags: [論文審核]
      summary: 查詢審核論文清單
      description: 取得待審核或已審核的論文列表
      parameters:
        - name: keyword
          in: query
          description: 關鍵字搜尋
          schema:
            type: string
            example: "深度學習"
        - name: status
          in: query
          description: 審核狀態篩選
          schema:
            type: string
            enum: [待審核, 審核中, 已通過, 已退件]
            example: "待審核"
        - name: department
          in: query
          description: 系所篩選
          schema:
            type: string
            example: "資訊工程學系"
        - name: startDate
          in: query
          description: 開始日期
          schema:
            type: string
            format: date
            example: "2024-07-01"
        - name: endDate
          in: query
          description: 結束日期
          schema:
            type: string
            format: date
            example: "2024-07-31"
        - name: page
          in: query
          description: 分頁頁碼
          schema:
            type: integer
            default: 1
        - name: per_page
          in: query
          description: 每頁筆數
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: 成功取得審核論文清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewListResponse'

  /reviews/{thesisId}:
    get:
      tags: [論文審核]
      summary: 取得單篇論文詳細資訊
      description: 取得論文的詳細審核資訊
      parameters:
        - name: thesisId
          in: path
          required: true
          schema:
            type: string
            example: "thesis123"
      responses:
        '200':
          description: 成功取得論文詳細資訊
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewDetailResponse'

  /reviews/{thesisId}/decision:
    post:
      tags: [論文審核]
      summary: 論文審核決定
      description: 審核人員對單篇論文做出「通過 / 退件」決定
      parameters:
        - name: thesisId
          in: path
          required: true
          schema:
            type: string
            example: "thesis123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [decision]
              properties:
                decision:
                  type: string
                  enum: [approved, rejected]
                  example: "approved"
                reason:
                  type: string
                  description: 審核意見或退件原因
                  example: "格式正確，內容符合要求"
      responses:
        '200':
          description: 審核決定成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  # 統計報表 API (來自 reports.yaml)
  /reports:
    post:
      tags: [統計報表]
      summary: 產生論文統計報表
      description: 傳入篩選條件，系統回傳預覽資料
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [type]
              properties:
                type:
                  type: string
                  description: 報表類型
                  enum: [授權率, 法遵率, 工作項目, 指導教授, 論文報表查詢, 機構典藏]
                  example: "工作項目"
                year:
                  type: string
                  description: 年度
                  example: "2024"
                month:
                  type: string
                  description: 月份
                  example: "07"
                department:
                  type: string
                  description: 系所
                  example: "資訊工程學系"
                advisor:
                  type: string
                  description: 指導教授
                  example: "李教授"
                range:
                  type: object
                  description: 日期範圍
                  properties:
                    startDate:
                      type: string
                      format: date
                      example: "2024-07-01"
                    endDate:
                      type: string
                      format: date
                      example: "2024-07-31"
      responses:
        '200':
          description: 成功產生報表
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportResponse'

  /reports/export:
    post:
      tags: [統計報表]
      summary: 匯出統計報表
      description: 將篩選條件對應的報表匯出成檔案
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [type]
              properties:
                type:
                  type: string
                  enum: [授權率, 法遵率, 工作項目, 指導教授, 論文報表查詢, 機構典藏]
                  example: "工作項目"
                year:
                  type: string
                  example: "2024"
                month:
                  type: string
                  example: "07"
                department:
                  type: string
                  example: "資訊工程學系"
      responses:
        '200':
          description: 匯出成功
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  # 送存國圖 API (來自 submissions.yaml)
  /submissions:
    get:
      tags: [送存國圖]
      summary: 取得送存清單
      description: 取得可送存到國家圖書館的論文清單
      responses:
        '200':
          description: 成功取得送存清單
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionListResponse'
    
    post:
      tags: [送存國圖]
      summary: 執行送存
      description: 批次送存多篇論文到國家圖書館
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [thesisIds]
              properties:
                thesisIds:
                  type: array
                  items:
                    type: string
                  description: 論文ID列表
                  example: ["thesis123", "thesis124", "thesis125"]
      responses:
        '201':
          description: 送存成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /submissions/history:
    get:
      tags: [送存國圖]
      summary: 查詢送存紀錄
      description: 查詢歷史送存紀錄
      responses:
        '200':
          description: 成功取得送存紀錄
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionHistoryResponse'

  /submissions/history/{historyId}/download:
    get:
      tags: [送存國圖]
      summary: 下載送存檔案
      description: 下載指定送存紀錄的檔案
      parameters:
        - name: historyId
          in: path
          required: true
          schema:
            type: string
            example: "sub20250812-001"
      responses:
        '200':
          description: 下載成功
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # 個人資料相關 Schema
    UserProfile:
      type: object
      properties:
        name:
          type: string
          description: 使用者姓名
          example: "王小明"
        email:
          type: string
          description: 使用者電子郵件
          example: "user@example.com"

    SavedThesis:
      type: object
      properties:
        id:
          type: string
          description: 論文唯一識別碼
          example: "1"
        title:
          type: string
          description: 論文標題
          example: "台灣博碩士論文網發展現況與展望"
        author:
          type: string
          description: 作者
          example: "王小明"
        school:
          type: string
          description: 學校
          example: "國立臺灣大學"
        degree:
          type: string
          description: 學位
          example: "碩士"
        type:
          type: string
          description: 論文類型
          example: "學術"
        college:
          type: string
          description: 學院
          example: "工學院"
        department:
          type: string
          description: 系所
          example: "資訊工程學系"
        advisor:
          type: string
          description: 指導教授
          example: "陳大明"
        language:
          type: string
          description: 論文語言
          example: "中文"
        year:
          type: integer
          description: 年度
          example: 113
        abstract:
          type: string
          description: 摘要
          example: "本論文探討台灣博碩士論文網的發展現況與未來展望..."
        keywords:
          type: array
          description: 關鍵字
          items:
            type: string
          example: ["論文網", "台灣", "Open Access"]
        fullTextAvailable:
          type: boolean
          description: 是否有全文
          example: true
        viewCount:
          type: integer
          description: 被點閱數
          example: 1200
        downloadCount:
          type: integer
          description: 下載數
          example: 800
        referenceCount:
          type: integer
          description: 被引用數
          example: 25

    # 人員管理相關 Schema
    User:
      type: object
      properties:
        id:
          type: string
          example: "u123456"
        name:
          type: string
          example: "王頌華"
        email:
          type: string
          example: "abc1221@gmail.com"
        role:
          type: string
          enum: [管理員, 審查人員, 工讀生, 系所人員, 其他]
          example: "管理員"
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/Permission'

    UserCreate:
      type: object
      required: [name, email, role]
      properties:
        name:
          type: string
          example: "陳小明"
        email:
          type: string
          example: "test@example.com"
        role:
          type: string
          enum: [管理員, 審查人員, 工讀生, 系所人員, 其他]
          example: "審查人員"
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/Permission'

    UserUpdate:
      type: object
      properties:
        role:
          type: string
          enum: [管理員, 審查人員, 工讀生, 系所人員, 其他]
          example: "工讀生"
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/Permission'

    Permission:
      type: object
      properties:
        name:
          type: string
          description: 權限名稱
          example: "研究生論文審查"
        level:
          type: string
          description: 權限層級
          enum: [viewer, editor]
          example: "editor"

    PermissionOption:
      type: object
      properties:
        name:
          type: string
          description: 權限名稱
          example: "人員帳號管理"
        description:
          type: string
          description: 權限說明
          example: "管理與編輯使用者帳號資訊"

    # 系統設定相關 Schema
    ThesisSetting:
      type: object
      properties:
        reviewFlow:
          type: string
          enum: [library_only, department_then_library]
          example: "library_only"
        formatLimit:
          type: object
          properties:
            allowedTypes:
              type: array
              items:
                type: string
              example: ["pdf", "docx", "txt"]
            maxFileSizeMB:
              type: integer
              example: 100
        faqs:
          type: array
          items:
            type: object
            properties:
              question:
                type: string
                example: "上傳後能修改嗎？"
              answer:
                type: string
                example: "期限內可刪除舊檔重新上傳。"
        relatedDocs:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                example: "建檔流程"
              fileName:
                type: string
                example: "workflow_v1.pdf"
        watermark:
          type: object
          properties:
            type:
              type: string
              enum: [text, image]
              example: "text"
            text:
              type: string
              example: "僅供審查使用"
            fontSize:
              type: integer
              example: 14
            opacity:
              type: integer
              example: 56
            position:
              type: string
              example: "center"
            imageUrl:
              type: string
              example: "https://files.ndl.example.com/wm/logo.png"
        advancedFields:
          type: array
          example: ["keywords", "abstract", "language", "reference"]
        supplemental:
          type: object
          properties:
            enabled:
              type: boolean
              example: true
            allowedTypes:
              type: array
              items:
                type: string
              example: ["pdf", "txt"]
            maxFileSizeMB:
              type: integer
              example: 30
        thesisReplacement:
          type: object
          properties:
            requiredDocs:
              type: boolean
              example: true
            requiredReason:
              type: boolean
              example: true
            descriptions:
              type: array
              items:
                type: object
                properties:
                  title:
                    type: string
                    example: "提供相關的證明文件"
                  content:
                    type: string
                    example: "請上傳相關證明檔案，以利審核。"
        thirdPartyAuthorization:
          type: object
          properties:
            enabled:
              type: boolean
              example: false
        onlineAgreement:
          type: object
          properties:
            copyrightStatement:
              type: string
              example: "本人確認論文授權..."
            extraDeclaration:
              type: string
              example: "其他授權說明..."
        schoolEThesis:
          type: object
          properties:
            options:
              type: array
              items:
                type: string
              example: ["internet_immediate", "campus_immediate"]
        nclEThesis:
          type: object
          properties:
            options:
              type: array
              items:
                type: string
              example: ["immediate"]
        publicScope:
          type: object
          properties:
            enabled:
              type: boolean
              example: true
            items:
              type: array
              items:
                type: string
              example: ["fulltext", "bibliographic", "toc"]

    # 論文相關 Schema
    Thesis:
      type: object
      properties:
        id:
          type: string
          example: "thesis123"
        department:
          type: string
          example: "資訊工程學系"
        studentName:
          type: string
          example: "陳小明"
        studentId:
          type: string
          example: "M110123456"
        title:
          type: string
          example: "基於深度學習的自然語言處理研究"
        status:
          type: string
          example: "公開"
        publishDate:
          type: string
          format: date
          example: "2024-04-22"

    # 審核相關 Schema
    ReviewItem:
      type: object
      properties:
        id:
          type: string
          example: "thesis123"
        department:
          type: string
          example: "資訊工程學系"
        studentName:
          type: string
          example: "陳小明"
        studentId:
          type: string
          example: "M110123456"
        title:
          type: string
          example: "基於深度學習的自然語言處理研究"
        status:
          type: string
          example: "待審核"
        submittedAt:
          type: string
          format: date-time
          example: "2024-07-28T14:32:00Z"

    # 報表相關 Schema
    ReportRow:
      type: object
      properties:
        id:
          type: string
          example: "1754380739"
        year:
          type: string
          example: "113"
        department:
          type: string
          example: "資訊工程學系"
        title:
          type: string
          example: "基於深度學習的自然語言處理研究"
        student:
          type: string
          example: "陳小明"
        advisor:
          type: string
          example: "李教授"
        status:
          type: string
          example: "公開"
        reviewedAt:
          type: string
          format: date-time
          example: "2025-07-15T15:59:00Z"

    # 送存相關 Schema
    SubmissionItem:
      type: object
      properties:
        id:
          type: string
          example: "thesis123"
        department:
          type: string
          example: "資訊工程學系"
        studentName:
          type: string
          example: "陳小明"
        studentId:
          type: string
          example: "M110123456"
        title:
          type: string
          example: "基於深度學習的自然語言處理研究"
        status:
          type: string
          example: "立即公開"
        schoolConfirm:
          type: string
          example: "授權"
        nclConfirm:
          type: string
          example: "授權"
        thirdParty:
          type: string
          example: "不授權"

    SubmissionHistory:
      type: object
      properties:
        id:
          type: string
          example: "sub20250812-001"
        submittedAt:
          type: string
          format: date
          example: "2025-08-12"
        user:
          type: string
          example: "王頌華"
        role:
          type: string
          example: "管理員"
        count:
          type: integer
          example: 100

    # 回應格式 Schema
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: object
          properties:
            message:
              type: string
              example: "操作成功完成"

    UserResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/User'

    UserListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/User'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    PermissionListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/PermissionOption'

    ThesisSettingResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/ThesisSetting'

    ThesisListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/Thesis'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    ReviewListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/ReviewItem'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    ReviewDetailResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/ReviewItem'

    ReportResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/ReportRow'

    SubmissionListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/SubmissionItem'

    SubmissionHistoryResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/SubmissionHistory'

    # 待辦事項相關 Schema
    TodoListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            type: object
          example: []

    # 系統設定相關 Schema
    SystemSetting:
      type: object
      properties:
        key:
          type: string
          description: 系統設定的鍵值
          example: "site_name"
        value:
          type: string
          description: 系統設定的值
          example: "大學論文系統"
        description:
          type: string
          description: 設定項目的說明
          example: "網站名稱設定"
        created_at:
          type: string
          format: date-time
          description: 建立時間
          example: "2024-09-25T10:44:50Z"
        updated_at:
          type: string
          format: date-time
          description: 更新時間
          example: "2024-09-25T10:44:50Z"

    SystemSettingCreate:
      type: object
      required: [key, value]
      properties:
        key:
          type: string
          description: 系統設定的鍵值
          example: "site_name"
        value:
          type: string
          description: 系統設定的值
          example: "大學論文系統"
        description:
          type: string
          description: 設定項目的說明
          example: "網站名稱設定"

    SystemSettingUpdate:
      type: object
      required: [value]
      properties:
        value:
          type: string
          description: 系統設定的值
          example: "新的大學論文系統"
        description:
          type: string
          description: 設定項目的說明
          example: "更新後的網站名稱設定"

    SystemSettingResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/SystemSetting'

    SystemSettingListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/SystemSetting'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        errors:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
                example: "not_found"
              message:
                type: string
                example: "找不到指定的系統設定"
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: object
          example: null

    # 主題策展相關 Schema
    Exhibition:
      type: object
      properties:
        id:
          type: string
          description: 主題策展唯一識別碼
          example: "EXH-AI-EDU-2024"
        title:
          type: string
          description: 策展主題名稱
          example: "人工智慧在教育領域的應用"
        description:
          type: string
          description: 策展主題說明
          example: "探討人工智慧技術如何革新教育模式，包含機器學習、自然語言處理等技術在個人化學習、智能輔導等方面的應用研究"
        icon:
          type: string
          description: 主題圖示 URL 或圖示代碼
          example: "🤖"
        category:
          type: string
          description: 策展分類
          enum: [熱門主題, 學科領域, 時事議題, 特色研究]
          example: "熱門主題"
        status:
          type: string
          description: 策展狀態
          enum: [草稿, 已發布, 已下架]
          example: "已發布"
        thesis_count:
          type: integer
          description: 該主題包含的論文數量
          example: 156
        view_count:
          type: integer
          description: 策展瀏覽次數
          example: 2580
        featured:
          type: boolean
          description: 是否為精選策展
          example: true
        created_at:
          type: string
          format: date-time
          description: 策展建立時間
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: 策展最後更新時間
          example: "2024-03-20T14:45:00Z"
        tags:
          type: array
          items:
            type: string
          description: 策展標籤
          example: ["AI", "教育科技", "機器學習", "個人化學習"]
        curator_info:
          type: object
          description: 策展人資訊
          properties:
            name:
              type: string
              example: "國立臺灣大學資訊工程學系"
            description:
              type: string
              example: "由資工系教授群共同策展，精選AI教育應用相關優質論文"

    ExhibitionCreate:
      type: object
      required: [title, description, category]
      properties:
        title:
          type: string
          description: 策展主題名稱
          example: "人工智慧在教育領域的應用"
        description:
          type: string
          description: 策展主題說明
          example: "探討人工智慧技術如何革新教育模式"
        icon:
          type: string
          description: 主題圖示 URL 或圖示代碼
          example: "🤖"
        category:
          type: string
          description: 策展分類
          enum: [熱門主題, 學科領域, 時事議題, 特色研究]
          example: "熱門主題"
        featured:
          type: boolean
          description: 是否為精選策展
          example: true
        tags:
          type: array
          items:
            type: string
          description: 策展標籤
          example: ["AI", "教育科技", "機器學習"]
        curator_info:
          type: object
          description: 策展人資訊
          properties:
            name:
              type: string
              example: "國立臺灣大學資訊工程學系"
            description:
              type: string
              example: "由資工系教授群共同策展"

    ExhibitionUpdate:
      type: object
      properties:
        title:
          type: string
          description: 策展主題名稱
          example: "人工智慧在教育領域的應用"
        description:
          type: string
          description: 策展主題說明
          example: "探討人工智慧技術如何革新教育模式"
        icon:
          type: string
          description: 主題圖示 URL 或圖示代碼
          example: "🤖"
        category:
          type: string
          description: 策展分類
          enum: [熱門主題, 學科領域, 時事議題, 特色研究]
          example: "熱門主題"
        status:
          type: string
          description: 策展狀態
          enum: [草稿, 已發布, 已下架]
          example: "已發布"
        featured:
          type: boolean
          description: 是否為精選策展
          example: true
        tags:
          type: array
          items:
            type: string
          description: 策展標籤
          example: ["AI", "教育科技", "機器學習"]
        curator_info:
          type: object
          description: 策展人資訊
          properties:
            name:
              type: string
              example: "國立臺灣大學資訊工程學系"
            description:
              type: string
              example: "由資工系教授群共同策展"

    ExhibitionResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/Exhibition'

    ExhibitionListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/Exhibition'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    ExhibitionThesesResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/Thesis'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    # 退件範本相關 Schema
    RejectTemplate:
      type: object
      properties:
        id:
          type: string
          description: 退件範本唯一識別碼
          example: "template001"
        content:
          type: string
          description: 退件範本內容
          example: "論文格式不符合規定，請重新調整後再次提交。"
        created_at:
          type: string
          format: date-time
          description: 建立時間
          example: "2024-09-25T10:48:47Z"
        updated_at:
          type: string
          format: date-time
          description: 更新時間
          example: "2024-09-25T10:48:47Z"

    RejectTemplateCreate:
      type: object
      required: [content]
      properties:
        content:
          type: string
          description: 退件範本內容
          example: "論文格式不符合規定，請重新調整後再次提交。"

    RejectTemplateUpdate:
      type: object
      required: [content]
      properties:
        content:
          type: string
          description: 退件範本內容
          example: "論文格式不符合規定，請重新調整後再次提交。"

    RejectTemplateResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/RejectTemplate'

    RejectTemplateListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/RejectTemplate'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    # 科系相關 Schema
    Department:
      type: object
      properties:
        id:
          type: string
          description: 科系唯一識別碼
          example: "dept001"
        college:
          type: string
          description: 學院名稱
          example: "工學院"
        department:
          type: string
          description: 科系名稱
          example: "資訊工程學系"
        created_at:
          type: string
          format: date-time
          description: 建立時間
          example: "2024-09-25T10:50:12Z"
        updated_at:
          type: string
          format: date-time
          description: 更新時間
          example: "2024-09-25T10:50:12Z"

    DepartmentResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          $ref: '#/components/schemas/Department'

    DepartmentListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        errors:
          type: array
          items:
            type: object
          example: []
        messages:
          type: array
          items:
            type: object
          example: []
        result:
          type: array
          items:
            $ref: '#/components/schemas/Department'
        result_info:
          $ref: '#/components/schemas/PaginationInfo'

    # 分頁資訊 Schema
    PaginationInfo:
      type: object
      properties:
        page:
          type: integer
          description: 當前頁碼
          example: 1
        per_page:
          type: integer
          description: 每頁筆數
          example: 20
        count:
          type: integer
          description: 當前頁面筆數
          example: 20
        total_count:
          type: integer
          description: 總筆數
          example: 156
        total_pages:
          type: integer
          description: 總頁數
          example: 8